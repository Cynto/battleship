(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);for(var r=a(1),i=a.n(r),c=a(16),n=a.n(c),s=(a(28),a(8)),o=(a(29),a(4)),l=a(15),d=a(11),j=[],u=0;u<100;u++)j.push(0);for(var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AI_GRID":return Object(d.a)(t.payload);default:return e}},h=[],f=0;f<100;f++)h.push(0);var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYER_GRID":return Object(d.a)(t.payload);default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GRID_COMPLETE":return t.payload;default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AI_BOAT_ARRAY":return Object(d.a)(t.payload);default:return e}},m=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYER_TURN":return t.payload;default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLAYER_BOAT_ARRAY":return[].concat(Object(d.a)(e),[t.payload]);case"SET_PLAYER_BOAT_ARRAY":return Object(d.a)(t.payload);default:return e}},g=Object(l.a)({playerGridArray:v,playerGridComplete:O,AIGrid:b,AIBoatArray:p,playerTurn:m,playerBoatArray:y}),x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.b,A=Object(l.c)(g,x()),N=function(e){return{type:"SET_PLAYER_GRID",payload:e}},_=function(e){return{type:"SET_AI_GRID",payload:e}},E=function(e){return{type:"SET_GRID_COMPLETE",payload:e}},S=function(e){return{type:"SET_AI_BOAT_ARRAY",payload:e}},R=function(e){return{type:"SET_PLAYER_BOAT_ARRAY",payload:e}},T=function(e){return{type:"SET_PLAYER_TURN",payload:e}},I=function e(){for(var t=A.getState().AIGrid,a=Math.floor(100*Math.random()),r=0,i=0,c=A.getState().playerGridArray,n=0;n<c.length;n+=1){if(7===c[n]){if(7!==c[n+1]&&6!==c[n+1]&&n+1<=99?a=n+1:7!==c[n-1]&&6!==c[n-1]&&n-1>=0?a=n-1:7!==c[n-10]&&6!==c[n-10]&&n-10>=0?a=n-10:7!==c[n+10]&&6!==c[n+10]&&n+10<=99&&(a=n+10),7===c[n]&&7===c[n+1]&&6!==c[n+2]&&7!==c[n+2]&&n+2>=0){a=n+2;break}if(7===c[n]&&7===c[n+1]&&7===c[n+2]&&6!==c[n+3]&&7!==c[n+3]&&n+3<=99){a=n+3;break}if(7===c[n]&&7===c[n-1]&&6!==c[n-2]&&7!==c[n-2]&&n-2>=0){a=n-2;break}if(7===c[n]&&7===c[n-1]&&7===c[n-2]&&6!==c[n-3]&&7!==c[n-3]&&n-3>=0){a=n-3;break}if(7===c[n]&&7===c[n-10]&&6!==c[n-20]&&7!==c[n-20]&&n-20>=0){a=n-20;break}if(7===c[n]&&7===c[n-10]&&7===c[n-20]&&6!==c[n-30]&&7!==c[n-30]&&n-30>=0){a=n-30;break}if(7===c[n]&&7===c[n+10]&&6!==c[n+20]&&7!==c[n+20]&&n+20<=99){a=n+20;break}if(7===c[n]&&7===c[n+10]&&7===c[n+20]&&6!==c[n+30]&&7!==c[n+30]&&n+30<=99){a=n-30;break}r+=1}5===t[n]&&(i+=1)}if(20!==r&&20!==i){if((6===c[a]||7===c[a])&&a>=0&&a<=99)return A.dispatch(T(!1)),e();!1===k(a,"AI")?A.dispatch(T(!0)):(setTimeout(e,1e3),A.dispatch(T(!1)))}},k=function(e,t){var a=A.getState(),r=[],i=(a.playerTurn,[]),c=5,n=4;"player"===t?(r=a.AIGrid,i=a.AIBoatArray,c=5,n=4):(r=a.playerGridArray,i=a.playerBoatArray,c=7,n=6);var s=!1;if(0===r[e]){if(s=!1,r[e]=n,"player"===t)return A.dispatch(T(!1)),setTimeout(I,1e3)}else 3!==r[e]&&1!==r[e]||(s=!0,r[e]=c,"player"===t&&A.dispatch(T(!0)));for(var o=[],l=0;l<10;l+=1)o.push(10*l);for(var d=[],j=9;j<100;j+=10)d.push(j);for(var u=0;u<i.length;u+=1)if(i[u].isSunk=!!i[u].locationArray.every((function(e){return r[e]===c})),i[u].isHit=!!i[u].locationArray.some((function(e){return r[e]===c})),i[u].isSunk)for(var b=0;b<i[u].locationArray.length;b+=1)i[u].locationArray[b]+10<=100&&r[i[u].locationArray[b]+10]!==c&&(r[i[u].locationArray[b]+10]=n),r[i[u].locationArray[b]-10]!==c&&(r[i[u].locationArray[b]-10]=n),d.includes(i[u].locationArray[b])||r[i[u].locationArray[b]+1]===c||(i[u].locationArray[b]+11<=100&&(r[i[u].locationArray[b]+11]=n),r[i[u].locationArray[b]-9]=n,r[i[u].locationArray[b]+1]=n),o.includes(i[u].locationArray[b])||r[i[u].locationArray[b]-1]===c||(i[u].locationArray[b]+9<=99&&(r[i[u].locationArray[b]+9]=n),r[i[u].locationArray[b]-1]=n,r[i[u].locationArray[b]-11]=n);return"player"===t?(A.dispatch(_(r)),A.dispatch(S(i))):(A.dispatch(N(r)),A.dispatch(R(i))),s},G=a(0),D=a(22);var Y=function(e){var t=e.gridArray,a=e.playerGrid,r=Object(o.c)((function(e){return e.playerTurn}));return Object(G.jsxs)("div",{"data-testid":"gameboard",className:"gameboard-container",children:[Object(G.jsxs)("div",{className:"title-container",children:[" ",Object(G.jsx)("h2",{children:a?"Player Board":"AI Board"})]}),Object(G.jsx)("div",{className:"grid-container",children:t.map((function(e,t){return 0===e?Object(G.jsx)("div",{"data-testid":"grid-item-".concat(t),className:a?"not-visible grid-item":"not-visible grid-item computer-grid",onClick:a?void 0:function(){r&&k(t,"player")}},D()):1===e?Object(G.jsx)("div",{"data-testid":"grid-item-".concat(t),className:"visible-player grid-item"},D()):2===e?Object(G.jsx)("div",{"data-testid":"grid-item-hover-".concat(t),className:"hover-player grid-item"},D()):3===e?Object(G.jsx)("div",{className:" not-visible grid-item computer-grid",onClick:a?void 0:function(){r&&k(t,"player")}},D()):4===e?Object(G.jsx)("div",{className:" hit-empty grid-item computer-grid",children:Object(G.jsx)("i",{className:"fas fa-bomb"})},D()):5===e?Object(G.jsx)("div",{className:" visible-player grid-item computer-grid",children:Object(G.jsx)("i",{className:"fas fa-bomb"})},D()):6===e?Object(G.jsx)("div",{className:"hit-empty grid-item",children:Object(G.jsx)("i",{className:"fas fa-bomb"})},D()):7===e?Object(G.jsx)("div",{className:"hit-boat grid-item",children:Object(G.jsx)("i",{className:"fas fa-bomb"})},D()):void 0}))})]})},B=(a(37),a(38),a(10)),C=function(e){for(var t=[],a=[],r=0;r<100;r++)t.push(0);var i=3;i="player"===e?1:3;var c=0,n=function e(r){c+=1;for(var n=!0,s=[],o=1===Math.floor(2*Math.random())?"vertical":"horizontal",l=Math.floor(99*Math.random()),d=0;d<r;d+=1)"vertical"===o?(s.push(d+l),l+=9):s.push(l+d);var j=s.slice(-1);if("horizontal"===o||"vertical"===o&&j[0]<100)for(var u=0;u<s.length;u+=1)t[s[u]]===i&&(n=!1),s[u]%10===9&&s[u+1]%10===0&&(n=!1),t[s[u+1]]===i&&(n=!1);j[0]>99&&(n=!1);for(var b=[],h=0;h<10;h+=1)b.push(10*h);for(var f=[],v=9;v<100;v+=10)f.push(v);for(var O=0;O<s.length;O+=1)t[s[O]+10]!==i&&t[s[O]-10]!==i||(n=!1),b.includes(s[O])||t[s[O]-1]!==i&&t[s[O]-11]!==i&&t[s[O]+9]!==i&&t[s[0]-11]!==i||(n=!1),f.includes(s[O])||t[s[O]+1]!==i&&t[s[O]+11]!==i&&t[s[O]-9]!==i||(n=!1);for(var p=0;p<s.length;p+=1)n&&(t[s[p]]=i);if(c>=20)return"Exceeded 10";if(!1===n)e(r);else{c=0;var m={locationArray:s,rotation:o,isSunk:!1,isHit:!1};a.push(m)}};return n(4),n(3),n(3),n(2),n(2),n(2),n(1),n(1),n(1),n(1),"player"===e?A.dispatch(R(a)):A.dispatch(S(a)),t};var L=function(e){for(var t=Object(o.b)(),a=e.whoWon,r=e.setWhoWon,i=[],c=0;c<100;c+=1)i.push(0);return Object(G.jsxs)("div",{className:"end-container",children:[Object(G.jsx)("h2",{children:"player"===a?"You won the game!":"The enemy AI has defeated you!"}),Object(G.jsx)(B.b,{to:"start",children:Object(G.jsx)("button",{onClick:function(){t(N(i)),t(E(!1));var e=C("AI");t(_(e)),r(""),t(T(!0))},children:"Play Again"})})]})};var P=function(){var e=Object(o.c)((function(e){return e.playerGridArray})),t=Object(o.c)((function(e){return e.AIGrid})),a=Object(o.c)((function(e){return e.playerTurn})),i=Object(r.useState)(""),c=Object(s.a)(i,2),n=c[0],l=c[1];return Object(r.useEffect)((function(){for(var a=0,r=0,i=0;i<e.length;i+=1)7===e[i]&&(a+=1),5===t[i]&&(r+=1);20===a?l("AI"):20===r&&l("player")}),[[e,t]]),Object(G.jsxs)("div",{"data-testid":"main-container",className:"main-container",children:[""===n?Object(G.jsxs)("div",{className:"grid-turn-container",children:[Object(G.jsx)(Y,{playerGrid:!0,gridArray:e}),Object(G.jsx)("div",{className:"turn",children:Object(G.jsx)("h1",{children:a?"Your Turn!":"AI Turn"})}),Object(G.jsx)(Y,{playerGrid:!1,gridArray:t})," "]}):null,""!==n?Object(G.jsx)(L,{whoWon:n,setWhoWon:l}):null]})};a(43);var w=function(e){return Object(G.jsx)("div",{"data-testid":"start-page",className:"start-page",children:Object(G.jsxs)("div",{className:"menu-container",children:[Object(G.jsx)("p",{children:"Your mission is to destroy all enemy ships!"}),Object(G.jsx)(B.b,{to:"/start",children:Object(G.jsx)("button",{children:"Start Game"})})]})})};a(44);var M=function(){return Object(G.jsx)("header",{"data-testid":"header",className:"header",children:Object(G.jsx)(B.b,{to:"/",children:Object(G.jsx)("h1",{children:"Battleship"})})})};a(45);var z=function(){return Object(G.jsxs)("footer",{children:[Object(G.jsxs)("div",{className:"left-footer",children:[Object(G.jsx)("h3",{children:"Made By Luca"}),Object(G.jsx)("a",{href:"https://github.com/Cynto",rel:"noreferrer",target:"_blank",children:Object(G.jsx)("i",{className:"fab fa-github"})})]}),Object(G.jsxs)("div",{className:"right-footer",children:[Object(G.jsx)("h3",{children:"GitHub Repository"}),Object(G.jsx)("a",{href:"https://github.com/Cynto/battleship",rel:"noreferrer",target:"_blank",children:Object(G.jsx)("i",{className:"fab fa-github-square"})})]})]})},W=a(3);a(46),a(47);var H=function(e){for(var t=Object(o.c)((function(e){return e.playerGridComplete})),a=e.setSize,i=e.changeGridItem,c=e.gridIndex,n=e.hoverLeave,l=e.rotation,d=Object(r.useState)(1),j=Object(s.a)(d,2),u=j[0],b=j[1],h=Object(r.useState)(2),f=Object(s.a)(h,2),v=f[0],O=f[1],p=Object(r.useState)(3),m=Object(s.a)(p,2),y=m[0],g=m[1],x=Object(r.useState)(4),A=Object(s.a)(x,2),_=A[0],S=A[1],R=Object(r.useState)("vertical"===l?"vertical":""),T=Object(s.a)(R,2),I=T[0],k=T[1],D=Object(o.b)(),Y=[],L=0;L<100;L+=1)Y.push(0);return Object(r.useEffect)((function(){_||y||v||u||D(E(!0))}),[u,v,y,_]),Object(r.useEffect)((function(){t&&(b(0),O(0),g(0),S(0))}),[t]),Object(r.useEffect)((function(){k("vertical"===l?"vertical":"")}),[l]),Object(G.jsxs)("div",{className:"total-right-container",children:[Object(G.jsxs)("div",{className:"boats-container ".concat(I),children:[Object(G.jsxs)("div",{className:"boat-amount-container ".concat(I),children:[Object(G.jsxs)("span",{children:[u,"x"]}),Object(G.jsxs)("div",{"data-testid":"draggable-item",className:"draggable-item ".concat(I),draggable:"true",onDragStart:function(){return a(4)},onDragEnd:function(){u>0&&i(c,1)&&b(u-1),n()},onClick:function(){return a(4)},children:[Object(G.jsx)("div",{className:"visible-player grid-item"}),Object(G.jsx)("div",{className:"visible-player grid-item"}),Object(G.jsx)("div",{className:"visible-player grid-item"}),Object(G.jsx)("div",{className:"visible-player grid-item"})]})]}),Object(G.jsxs)("div",{className:"boat-amount-container ".concat(I),children:[Object(G.jsxs)("span",{children:[v,"x"]}),Object(G.jsxs)("div",{className:"draggable-item ".concat(I),draggable:"true",onDragStart:function(){return a(3)},onDragEnd:function(){v>0&&i(c,1)&&O(v-1),n()},onClick:function(){return a(3)},children:[Object(G.jsx)("div",{className:"visible-player grid-item"}),Object(G.jsx)("div",{className:"visible-player grid-item"}),Object(G.jsx)("div",{className:"visible-player grid-item"})]})]}),Object(G.jsxs)("div",{className:"boat-amount-container ".concat(I),children:[Object(G.jsxs)("span",{children:[y,"x"]}),Object(G.jsxs)("div",{className:"draggable-item ".concat(I),draggable:"true",onDragStart:function(){return a(2)},onDragEnd:function(){y>0&&i(c,1)&&g(y-1),n()},onClick:function(){return a(2)},children:[Object(G.jsx)("div",{className:"visible-player grid-item"}),Object(G.jsx)("div",{className:"visible-player grid-item"})]})]}),Object(G.jsxs)("div",{className:"boat-amount-container ".concat(I),children:[Object(G.jsxs)("span",{children:[_,"x"]}),Object(G.jsx)("div",{className:"draggable-item ".concat(I),draggable:"true",onDragStart:function(){return a(1)},onDragEnd:function(){_>0&&i(c,1)&&S(_-1),n()},onClick:function(){return a(1)},children:Object(G.jsx)("div",{className:"visible-player grid-item"})})]})]}),Object(G.jsxs)("div",{className:"start-button-container",children:[Object(G.jsxs)("button",{onClick:function(){b(1),O(2),g(3),S(4),D(N(Y)),D(E(!1))},children:["Reset"," "]}),Object(G.jsx)("button",{onClick:function(){D(N(C("player"))),D(E(!0))},children:"Randomize"}),_||y||v||u?null:Object(G.jsx)(B.b,{to:"/game",children:Object(G.jsx)("button",{children:"Start"})})]})]})},U=a(22);var J=function(){var e=Object(r.useState)(1),t=Object(s.a)(e,2),a=t[0],i=t[1],c=Object(r.useState)("horizontal"),n=Object(s.a)(c,2),l=n[0],d=n[1],j=Object(r.useState)(1),u=Object(s.a)(j,2),b=u[0],h=u[1],f=Object(o.c)((function(e){return e.playerGridArray})),v=Object(o.b)(),O=function(){for(var e=f,t=0;t<e.length;t+=1)2===e[t]&&(e[t]=0);v(N(e))},p=function(e,t){for(var r=f,i=e,c=[],n=!0,s=0;s<a;s+=1)"horizontal"===l?c.push(e+s):(c.push(s+i),i+=9);var o=c.slice(-1);if("horizontal"===l||"vertical"===l&&o[0]<100){for(var d=0;d<c.length;d+=1)1===r[c[d]]&&(n=!1),c[d]%10===9&&c[d+1]%10===0&&(n=!1),1===r[c[d+1]]&&(n=!1);for(var j=[],u=0;u<10;u+=1)j.push(10*u);for(var b=[],h=9;h<100;h+=10)b.push(h);for(var O=0;O<c.length;O+=1)1!==r[c[O]+10]&&1!==r[c[O]-10]||(n=!1),j.includes(c[O])||1!==r[c[O]-1]&&1!==r[c[O]-11]&&1!==r[c[O]+9]&&1!==r[c[0]-11]||(n=!1),b.includes(c[O])||1!==r[c[O]+1]&&1!==r[c[O]+11]&&1!==r[c[O]-9]||(n=!1);if(n){for(var p=0;p<c.length;p+=1)r[c[p]]=t;if(1===t)v(function(e){return{type:"ADD_PLAYER_BOAT_ARRAY",payload:e}}({locationArray:c,rotation:l,isSunk:!1,isHit:!1}))}}return v(N(r)),n};return document.addEventListener("keypress",(function(e){"r"===e.key&&d("vertical"===l?"horizontal":"vertical")})),Object(G.jsx)("div",{"data-testid":"start",className:"start",children:Object(G.jsxs)("div",{className:"grid-layout-title-container",children:[Object(G.jsx)("h2",{children:"Arrange Your Board"}),Object(G.jsx)("p",{children:"Press R to Rotate Ships"}),Object(G.jsxs)("div",{className:"grid-layout-container",children:[Object(G.jsx)("div",{className:"grid-container",children:f.map((function(e,t){return 0===e?Object(G.jsx)("div",{"data-testid":"grid-item-".concat(t),className:"not-visible grid-item",onDragEnter:function(){O(),p(t,2),h(t)}},U()):1===e?Object(G.jsx)("div",{"data-testid":"grid-item-".concat(t),className:"visible-player grid-item"},U()):2===e?Object(G.jsx)("div",{"data-testid":"grid-item-hover-".concat(t),className:"hover-player grid-item"},U()):void 0}))}),Object(G.jsx)(H,{hoverLeave:O,setSize:i,changeGridItem:p,gridIndex:b,rotation:l})]})]})})};var X=function(){var e=C("AI");return Object(o.b)()(_(e)),Object(G.jsx)(B.a,{children:Object(G.jsxs)("div",{className:"App",children:[Object(G.jsx)(M,{}),Object(G.jsxs)(W.c,{children:[Object(G.jsx)(W.a,{exact:!0,path:"/",children:Object(G.jsx)(w,{})}),Object(G.jsx)(W.a,{path:"/start",children:Object(G.jsx)(J,{})}),Object(G.jsx)(W.a,{path:"/game",children:Object(G.jsx)(P,{})})]}),Object(G.jsx)(z,{})]})})};t.default=A;n.a.render(Object(G.jsx)(i.a.StrictMode,{children:Object(G.jsx)(o.a,{store:A,children:Object(G.jsx)(X,{})})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.24b101db.chunk.js.map